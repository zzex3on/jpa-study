# 양방향 연관관계와 연관관계의 주인 - 기본편 🌟

테이블의 경우, __외래키__ 하나로 양방향 매핑이 되지만 반대로 객체에서는 동일한 경우여도 단방향으로만 가능  
~~(사실 객체는 양방향보다는 단방향이 더 좋다고 한다..)~~

## 1. 연관관계의 주인과 mappedBy
> 객체와 테이블간에 연관관계를 맺는 차이를 이해할 것
- 객체 : ```(1) -> (N)``` 연관관계 1개 __(단)__ + ```(N) -> (1)``` 연관관계 1개 __(단)__   
  => 양방향 연관관계가 아니라 단방향 연관관계가 2개 있다고 봐야함, 다른 값을 참조하기 위해서는 그 객체마다 단방향 연관관계 2개가 사용
- 테이블 : ```(1) <-> (N)``` 연관관계 1개 __(양)__   
  => 양방향 연관관계 1개
  => __외래키__ 하나로 두 테이블의 연관관계를 한 번에 관리함(조인)
   
객체에서 단방향 연관관계가 2개가 생기면서 _무엇을 중심으로 관리해야할지_ 에 대한 딜레마가 오기 시작함(insert, update 등의 작업)  
따라서, 2개 중 1개를 선정하여 테이블과도 올바르게 연결되도록 해야 함! => __```연관관계의 주인```__

### 1.1 연관관계의 주인
#### ✔️ 객체에서의 양방향 매핑 규칙
- 객체의 두 관계 중 하나는 ```연관관계의 주인```으로 __외래키를 관리(등록, 수정 등의 변경 작업) 가능__
- 주인이 아닌 하나는 __읽기만 가능__ ✨
- 주인은 mappedBy 속성 사용불가 
- 주인이 아니면 mappedBy 속성으로 주인 지정
<img src="https://github.com/zzex3on/jpa-study/assets/87990439/b95677c8-f851-4bc7-a36e-12a72ae4b639" width="70%">
<br><br>이런 느낌인 듯?<br><br>

#### ✔️ 주인 선정의 기준
** __외래키__ 가 존재하는 테이블과 연관있는 객체를 주인으로 결정
- A(객체) - A(테이블)이 아니라 A(객체) - B(테이블) 과 같은 형태로 이어지면 논리적으로 맞지 않고 복잡해질 수 있음..
- 성능 이슈가 발생할 확률도 있음
- 단순하게 DB 테이블로 따졌을 때 다(N)쪽인 곳이 주인으로 설정하면 됨   
  ex. Team - Member (1:N) 일 때, Member가 주인이 됨 
  
### 1.2 mappedBy ✨

